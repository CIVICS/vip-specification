<!-- Start of enumerated values -->
<xs:simpleType name="VoteVariation">
  <!-- Unmodified from P1622.2 6.3.28 -->
  <xs:restriction base="xs:string">
    <xs:enumeration value="approval"/>
    <xs:enumeration value="cumulative"/>
    <xs:enumeration value="IRV"/>
    <xs:enumeration value="N-of-M"/>
  </xs:restriction>
</xs:simpleType>

<xs:simpleType name="CandidateStatus">
  <!-- Currently in (unreleased) V31 of the draft standard -->
  <xs:restriction base="xs:string">
    <xs:enumeration value="advanced-to-runoff"/>
    <xs:enumeration value="filed"/>
    <xs:enumeration value="qualified"/>
    <xs:enumeration value="winner"/>
    <xs:enumeration value="withdrawn"/>
    <xs:enumeration value="write-in"/>
  </xs:restriction>
</xs:simpleType>

<!-- End of enumerated values -->

<!-- Abstract base classes for ballots and contests -->
<xs:complexType name="BallotSelection" abstract="true">
  <!-- Modified from P1622.2 6.3.1 to remove VoteCounts -->
  <xs:element name="id" type="xs:ID"/>
  <!-- Question: What's the use case for ballotSelectionID? -->
</xs:complexType>

<xs:complexType name="Contest" abstract="true">
  <!-- Slightly modified from P1622.2 6.3.5 -->
  <xs:element name="ballot_selection_id" type="xs:ID" minOccurs="0" maxOccurs="unbounded"/>
  <!-- See the feature/external-identifier branch for specifics. The
       national/state/local contest codes would all be here. -->
  <xs:element name="external_identifier" type="external_identifier" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="electoral_district_id" type="xs:ID"/>
  <xs:element name="id" type="xs:ID"/>
  <xs:element name="abbreviation" type="xs:string"/>
  <xs:element name="name" type="xs:string"/>
  <xs:element name="voteVariation" type="VoteVariation"/>
  <!-- Start of non-P1622.2 elements -->
  <xs:element name="electorate_specification" type="xs:string"/>
  <!-- End of non-P1622.2 elements -->
  <!-- Notes:
       The following fields are reflected in the 'CandidateChoice' object:
       o partisan;
       o primary_party;
       o office; and
       o number_elected and number_voting_for.
       The ballot_id and ballot_placement fields are obsoleted by the
       OrderedContests element.
    -->
</xs:complexType>
<!-- End of abstract base classes -->

<xs:complexType name="Contact">
  <!-- Unmodified from P1622.2 6.3.4 -->
  <xs:element name="id" type="xs:ID"/>
  <xs:element name="URL" type="xs:anyURI" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="addressLine" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="email" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="fax" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
  <!-- See the feature/schedule branch for details -->
  <xs:element name="hours" type="hours_open" minOccurs="0"/>
  <xs:element name="name" type="xs:string"/>
  <xs:element name="phone" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
</xs:complexType>

<xs:complexType name="Person">
  <!-- Unmodified from revised P1622.2 6.3.14 -->
  <xs:element name="id" type="xs:ID"/>
  <xs:element name="date_of_birth" type="xs:date" minOccurs="0"/>
  <xs:element name="contact_id" type="xs:ID" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="party_id" type="xs:ID" minOccurs="0"/>
  <xs:element name="firstName" type="xs:string" minOccurs="0"/>
  <xs:element name="lastName" type="xs:string"/>
  <xs:element name="middleName" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
  <xs:element name="nickname" type="xs:string" minOccurs="0"/>
  <xs:element name="prefix" type="xs:string" minOccurs="0"/>
  <xs:element name="profession" type="xs:string" minOccurs="0"/>
  <xs:element name="title" type="xs:string" minOccurs="0"/>
</xs:complexType>

<!-- Party extends BallotSelection since people can vote straight-party -->
<xs:complexType name="Party">
  <!-- Mostly unmodified from revised P1622.2 6.3.12 -->
  <xs:complexContent>
    <xs:extension base="BallotSelection">
      <xs:element name="abbreviation" type="xs:string"/>
      <xs:element name="name" type="xs:string"/>
      <xs:element name="external_identifier" type="external_identifier" minOccurs="0" maxOccurs="unbounded"/>
      <!-- Start of non-P1622.2 elements -->
      <xs:element name="colorCode" type="xs:string" pattern="[0-9a-f]{6}"/>
      <xs:element name="logoUrl" type="xs:anyURI" minOccurs="0"/>
      <!-- End of non-P1622.2 elements -->
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<xs:complexType name="Office">
  <!-- Largely unmodified from revised P1622.2 6.3.10 -->
  <xs:sequence>
    <xs:element name="electoral_district_id" type="xs:ID"/>
    <xs:element name="id" type="xs:ID"/>
    <xs:element name="name" type="xs:string"/>
    <xs:element name="external_identifier" type="external_identifier" minOccurs="0" maxOccurs="unbounded"/>
    <xs:element name="partisan" type="xs:boolean" minOccurs="0"/>
    <xs:element name="termEndDate" type="xs:date" minOccurs="0"/>
    <xs:element name="termStartDate" type="xs:date" minOccurs="0"/>
    <xs:element name="termType" type="TermType"/>
  </xs:sequence>
</xs:complexType>

<xs:complexType name="Candidate">
  <!-- Unmodified from revised P1622.2 6.3.3 -->
  <xs:element name="party_id" type="xs:ID" minOccurs="0"/>
  <xs:element name="person_id" type="xs:ID" minOccurs="0"/>
  <xs:element name="id" type="xs:ID"/>
  <xs:element name="ballotName" type="xs:string"/>
  <xs:element name="fileDate" type="xs:dateTime"/>
  <xs:element name="isIncumbent" type="xs:boolean"/>
  <xs:element name="isTopTicket" type="xs:boolean"/>
  <xs:element name="status" type="CandidateStatus"/>
</xs:complexType>

<xs:complexType name="CandidateSelection">
  <!-- Unmodified from revised P1622.2 6.3.1.2 -->
  <xs:complexContent>
    <xs:extension base="BallotSelection">
      <xs:sequence>
        <xs:element name="candidate_id" type="xs:ID" maxOccurs="unbounded"/>
        <xs:element name="endorsement_party_id" type="xs:ID" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
      <xs:element name="isWriteIn" type="xs:boolean"/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<!-- This replaces the contest element from VIP -->
<xs:complexType name="CandidateChoice">
  <!-- Unmodified from revised P1622.2 6.3.5.1.2 -->
  <xs:complexContent>
    <xs:extension base="Contest">
      <xs:sequence>
        <xs:element name="office_id" type="xs:ID" minOccurs="0"/>
        <xs:element name="primary_party_id" type="xs:ID" minOccurs="0"/>
      </xs:sequence>
      <xs:element name="numberElected" type="xs:integer"/>
      <xs:element name="votesAllowed" type="xs:integer"/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<xs:complexType name="RetentionElection">
  <!-- Currently in (unreleased) V31 of the draft standard -->
  <xs:complexContent>
    <xs:extension base="BallotMeasure">
      <xs:sequence>
        <xs:element name="candidate_id" type="xs:ID"/>
        <xs:element minOccurs="0" name="office_id" type="xs:ID"/>
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<!-- This replaces the "referendum" element in VIP -->
<xs:complexType name="BallotMeasure">
  <!-- Slightly modified from revised P1622.2 6.3.5.1.1 -->
  <xs:complexContent>
    <xs:extension base="Contest">
      <xs:sequence>
        <xs:element name="FullText" type="xs:string" minOccurs="0"/>
        <xs:element name="SummaryText" type="xs:string" minOccurs="0"/>
        <!-- Info URL added from current VIP spec. -->
        <xs:element name="infoUrl" type="xs:anyURI"/>
        <!-- SURVEY: How much are the pro/con statements and other parts of
             VIP around referenda actually used? -->
      </xs:sequence>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<!-- Generic string for a ballot measure (referendum) selection -->
<xs:complexType name="BallotMeasureSelection">
  <!-- Unmodified from revised P1622.2 6.3.1.1 -->
  <xs:complexContent>
    <xs:extension base="BallotSelection">
      <xs:element name="selection" type="xs:string"/>
    </xs:extension>
  </xs:complexContent>
</xs:complexType>

<!-- Pairs up the contest with all the ballot selections for that contest -->
<xs:complexType name="OrderedContest">
  <!-- Unmodified from revised P1622.2 6.3.11 -->
  <xs:sequence>
    <xs:element name="contest_id" type="xs:ID"/>
    <xs:element name="ballot_selection_id" type="xs:ID" minOccurs="0" maxOccurs="unbounded"/>
  </xs:sequence>
  <xs:element name="id" type="xs:ID" minOccurs="1"/>
</xs:complexType>
